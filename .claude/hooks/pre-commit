#!/bin/bash

# Pre-commit hook to run ktlintCheck before committing
# This ensures code formatting compliance

echo "Running ktlintCheck before commit..."

# Change to backend directory
cd "$(git rev-parse --show-toplevel)/backend" || exit 1

# Run ktlintCheck
./gradlew ktlintCheck

# Capture exit code
EXIT_CODE=$?

if [ $EXIT_CODE -ne 0 ]; then
    echo ""
    echo "‚ùå ktlintCheck failed! Please fix the formatting issues before committing."
    echo "üí° You can run './gradlew ktlintFormat' to auto-fix most issues."
    exit 1
fi

echo "‚úÖ ktlintCheck passed!"
exit 0
